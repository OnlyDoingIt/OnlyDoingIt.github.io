<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>
	<body>
		<canvas id="canvas" width="800px" height="600px" style="border: 1px solid black;" >
			浏览器太low了
		</canvas>
		<script type="text/javascript">
			var canvas=document.getElementById("canvas")
//			在canvas画图 ,在声明的2d的画布场景绘制
             var cxt=canvas.getContext("2d") /*声明的2d场景*/
               
               var data=[
                       {
                       	id:121,
                       	name:"dota",
                       value:'25%',
                       	color:'red'
                       },
                       {
                       	id:122,
                       		name:"dota",
                       	value:'15%',
                       	color:'blue'
                       },
                       {
                       	id:123,
                       	name:"dnf",
                       	value:'10%',
                       	color:'yellow'
                       },
                       {
                       	id:124,
                       	name:"炉石",
                       	value:'5%',
                       	color:'green'
                       },
                       {
                       	id:124,
                       	name:"lol",
                       	value:'45%',
                       	color:'pink'
                       }
               ]
           var startArc=0,endArc=0,redius=200;   //起始的位置
           for(var i=0;i<data.length;i++){
           	//每一个结束的位置
//         	console.log(data[i].value)    去掉%
           	endArc=startArc+(parseFloat(data[i].value))
           	console.log(endArc)
//         	开始路径
            cxt.beginPath()
            cxt.font='30px "宋体"';
            cxt.fillStyle=data[i].color;
            cxt.moveTo(400,300)
            cxt.arc(400,300,redius,2*Math.PI*startArc/100,(2*Math.PI*endArc/100),false)
            cxt.closePath()
            //添加每一块的文字说明
            
            var txt=data[i].name+data[i].value;
            cxt.textAlign="center";  //设置文本对齐
            cxt.textBaseline="middle"  //按文本对齐
            
            
            //设置文本存放角度
            
             var txtArc=(startArc+parseFloat(data[i].value)/2)*360/100;
            
            var txtX=400+Math.cos(txtArc*Math.PI/180)*(redius+60);
            var txtY=300+Math.sin(txtArc*Math.PI/180)*(redius+60);
            cxt.fillText(txt,txtX,txtY);
            cxt.fill()
            cxt.stroke()
            startArc=endArc;
           }
		</script>
	</body>
</html>
